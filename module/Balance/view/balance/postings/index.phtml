<?php
    // Dependências
    use Balance\Stdlib\Hydrator\Strategy as HydratorStrategy;
    use Balance\View\Table\Table;
    use Zend\Stdlib\Hydrator;

    // Dependências
    $this->headLink()
        ->appendStylesheet($this->basePath('/assets/jQuery-Timepicker-Addon/dist/jquery-ui-timepicker-addon.min.css'));
    // Dependências
    $this->headScript()
        ->appendFile($this->basePath('/assets/jQuery-Timepicker-Addon/dist/jquery-ui-timepicker-addon.min.js'))
        ->appendFile($this->basePath('/module/Balance/assets/jQuery-Timepicker-Addon/js/jquery-ui-timepicker-addon.js'));

    // Título
    $this->headTitle()
        ->append('Lançamentos')
        ->append('Listar');

    // Formulário
    $form->get('datetime_begin')
        ->setAttribute('class', 'form-control-datetimepicker')
        ->setOption('add-on-append', '<span class="glyphicon glyphicon-calendar"></span>');
    // Formulário
    $form->get('datetime_end')
        ->setAttribute('class', 'form-control-datetimepicker')
        ->setOption('add-on-append', '<span class="glyphicon glyphicon-calendar"></span>');

    // Hidratação das Linhas
    $hydrator = (new Hydrator\ArraySerializable())
        ->addStrategy('datetime', new HydratorStrategy\Datetime());

    // Tabela
    $table = (new Table())
        ->setForm($form)
        ->setTitle('Listar Lançamentos')
        ->addColumn('datetime', 'Data e Hora')
        ->addColumn('description', 'Descrição')
        ->setElements($this->elements)
        ->setHydrator($hydrator);
    // Ação: Adicionar
    $table->setAction('add', array('route' => 'postings/add'));
    // Ação: Elemento - Editar
    $table->setElementAction('edit', array('route' => 'postings/edit'));
    // Ação: Elemento - Remover
    $table->setElementAction('remove', array('route' => 'postings/remove'));
    // Cabeçalho
    echo $this->partial('layout/page-header', array(
        'title'    => 'Lançamentos',
        'subtitle' => 'Listar',
    ));
    // Renderização
    echo $this->partial('layout/table', array('table' => $table));
?>
